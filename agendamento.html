<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Agendamento — Manoella Beauty</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="bg-particles" id="bgParticles" aria-hidden="true"></div>

  <header class="site-header">
    <img src="img/logo.jpeg" alt="Manoella Beauty - Logo" class="site-logo">
  </header>

  <main class="container agendamento-container">
    <section class="agendamento-box">
      <h1>Agendar Serviço</h1>
      <p class="subtitle">Preencha seus dados — o pagamento de 50% confirma o agendamento (opção PIX), ou pode pagar no local antes do início.</p>

      <form id="bookingForm">
        <label>Serviço selecionado</label>
        <input type="text" id="serviceField" readonly>

        <label>Valor (R$)</label>
        <input type="text" id="priceField" readonly>

        <label>Nome completo</label>
        <input type="text" id="clientName" placeholder="Seu nome" required>

        <label>WhatsApp</label>
        <input type="tel" id="clientPhone" placeholder="(DDD) 9xxxx-xxxx" required>

        <div class="two-col">
          <div>
            <label>Data</label>
            <input type="date" id="dateField" required>
          </div>
          <div>
            <label>Horário</label>
            <input type="time" id="timeField" required>
          </div>
        </div>

        <label>Forma de pagamento</label>
        <select id="payMethod" required>
          <option value="">Selecione...</option>
          <option value="pix">PIX — pagar 50% agora</option>
          <option value="local">Pagar no local (antes do serviço)</option>
        </select>

        <div id="pixArea" class="pix-area" style="display:none;">
          <div class="pix-qr">
            <img src="img/qrcode.jpeg" alt="QR Code PIX" />
          </div>
          <p>Chave PIX: <strong>chave@exemplo.com</strong></p>
          <a href="https://nubank.com.br/pagar" target="_blank" class="btn pay-link">Ir para pagamento (Nubank)</a>
          <p class="small">Após o pagamento, envie o comprovante via WhatsApp para confirmar o horário.</p>
        </div>

        <div class="actions">
          <button type="submit" class="btn confirm">Confirmar Agendamento</button>
          <a href="index.html" class="btn secondary">Voltar</a>
        </div>
      </form>

      <div class="note">
        <strong>Observação:</strong> O pagamento de 50% é obrigatório para confirmar agendamentos online. Pagamento no local é permitido somente se efetuado antes do início do serviço.
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="footer-links">
      <a href="https://goo.gl/maps/" target="_blank" rel="noopener">Como Chegar</a> ·
      <a href="https://www.instagram.com/manoellabeauty_/" target="_blank" rel="noopener">Instagram</a>
    </div>
    <div class="copyright">© 2025 Manoella Beauty</div>
  </footer>

  <script src="script.js"></script>
  <script>
    // preenche formulário a partir da query string
    (function prefillFromQuery(){
      const params = new URLSearchParams(location.search);
      const service = params.get('service') || '';
      const price = params.get('price') || '';
      if(service) document.getElementById('serviceField').value = decodeURIComponent(service);
      if(price) document.getElementById('priceField').value = price.replace('.',',');
    })();

    // pagamento toggle & form submit
    document.getElementById('payMethod').addEventListener('change', function(){
      document.getElementById('pixArea').style.display = this.value === 'pix' ? 'block' : 'none';
    });

    document.getElementById('bookingForm').addEventListener('submit', function(e){
      e.preventDefault();
      // simple validation
      const name = document.getElementById('clientName').value.trim();
      const phone = document.getElementById('clientPhone').value.trim();
      const date = document.getElementById('dateField').value;
      const time = document.getElementById('timeField').value;
      const pay = document.getElementById('payMethod').value;
      if(!name || !phone || !date || !time || !pay) {
        alert('Preencha todos os campos obrigatórios.');
        return;
      }
      // Build message for WhatsApp with details
      const service = document.getElementById('serviceField').value || 'Serviço não informado';
      const price = document.getElementById('priceField').value || '';
      const msg = `Olá, meu nome é ${name}. Gostaria de agendar: ${service} (${price}) no dia ${date} às ${time}. Forma de pagamento: ${pay === 'pix' ? 'PIX (50% pago)' : 'Pagamento no local (pago antes do serviço)'} - Enviar comprovante se aplicável.`;
      const waNumber = '55219XXXXXXXX'; // substitua pelo número real (formato internacional sem +)
      const url = `https://wa.me/${waNumber}?text=${encodeURIComponent(msg)}`;
      // abrir WhatsApp para confirmar
      window.open(url, '_blank');
      alert('Você será direcionado ao WhatsApp para finalizar o agendamento. Após pagamento, envie o comprovante.');
    });
  </script>
</body>
</html>
